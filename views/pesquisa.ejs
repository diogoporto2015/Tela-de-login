<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" conteudo="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" conteudo="ie=edge">
    <link rel="stylesheet" href="./css/print.css">
    <title>Pesquisa de Cliente</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="../js/deletar.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>
<body>
<div class="dados">
    <nav class="navbar navbar-expand navbar-dark border border-1 border-drak  bg-primary shadow ">
        <div class="container-fluid">
            <div class="navbar-nav">
                <img class="navbar-brand" src="./imagens/medimagem2.png" style="width: 50px; border-radius: 100px;">
                <span class="navbar-text pt-3"><h5>MedImagem</h5></span>
            </div>

            <form id="search-form" class="d-flex"  action="/" method="GET">
                <input id="campoRecebe" class="form-control m-2" type="text" name="search"  placeholder="Pesquisar...">
                <button type="submit" class="btn btn-primary m-2" >Pesquisa</button>
            </form>      

            <ul class="navbar-nav ">

                <div class="dropdown mt-3">
                    <li class="nav-item">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Agenda</a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="./dessiomentria.html" class="dropdown-item">Denssiometria</a>
                                </li>

                                <li>
                                    <hr class="dropdown-divider"/>
                                    <a href="/mamografia.html" class="dropdown-item">Mamografia</a>
                                </li>
                            
                                <li>
                                    <hr class="dropdown-divider"/>
                                    <a href="./medicoOrtopedia.html" class="dropdown-item">Médico Ortopedia</a>
                                </li>
                            
                                <li>
                                    <hr class="dropdown-divider"/>
                                    <a href="./raoisx.html" class="dropdown-item">Raios X</a>
                                </li>
                            
                                <li>
                                    <hr class="dropdown-divider"/>
                                    <a href="./ultrassonografia.html" class="dropdown-item">Ultrassonografia</a>
                                </li>
                            </ul>
                    </li>
                </div>

                <div class="dropdown mt-3 m-3">
                    <li class="nav-item">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Paciente</a> 

                        <ul class="dropdown-menu">
                            <li>
                                <a href="../ficha" class="dropdown-item">Cadastro</a>
                            </li>

                            <li>
                                <hr class="dropdown-divider"/>
                                <a href="" class="dropdown-item">Declaração de Comparecimento</a>
                            </li>
                        
                        </ul> 

                    </li>
                </div>

                <div class="dropdown mt-3 ">
                    <li class="nav-item">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Faturamento</a>

                        <ul class="dropdown-menu">
                            <li>
                                <a href="" class="dropdown-item">Faturamento do Paciente</a>
                            </li>

                            <li>
                                <hr class="dropdown-divider"/>
                                <a href="" class="dropdown-item">Fecha Faturamento</a>
                            </li>
                        
                        </ul> 
                </div>

                <div class="dropdown mt-3 m-3">
                    <li class="nav-item">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Administatrador</a>

                        <ul class="dropdown-menu">
                            <li>
                                <h2 class="dropdown-header text-center">Funcionários</h2>
                                <a href="" class="dropdown-item">Adicionar Cadastro</a>
                            </li>

                            <li>
                                <a href="" class="dropdown-item">Editar cadastro</a>
                            </li>
                        
                            <li>
                                <a href="" class="dropdown-item">Apagar Cadastro</a>
                                <hr class="dropdown-divider"/>
                            </li>
                        
                            <li>
                                <h2 class="dropdown-header text-center">Usuários</h2>
                                <a href="" class="dropdown-item">Adicionar Cadastrar</a>
                            </li>
                        
                        </ul> 

                    </li>
                </div>

                <div class="dropdown">
                    <li class="nav-item">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img src="./imagens/usuario.png" alt="imagem usuario" style="width: 50px" >
                            <span class="mb-3 ms-2">Bem Vindo</span>
                        </a>

                        <ul class="dropdown-menu dropdown-menu-end">

                            <li>
                                <a href="./index.html" class="dropdown-item">Logout</a>
                            </li>

                            <li>
                                <hr class="dropdown-divider"/>
                                <a href="" class="dropdown-item">Sair</a>
                            </li>
                        
                        </ul> 

                    </li>
                </div>
            </ul>  
            
        </div>
    </nav>

    <div class="pt-2"></div>

    <form class="container border bg-white shadow pb-4">

        <div class="my-3 text-start">
          
            <button type="button" id="sair" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#JanelaModalSair">Novo Cadastro</button>
            <div id="JanelaModalSair" class="modal fade " data-bs-backdrop="static">

                <div class="modal-dialog modal-lg modal-dialog-centered ">

                    <div class="modal-content">
 
                        <div class="modal-header align-self-center">
                            <h2 class="modal-title">Cadastra Novo Paciente</h2>
                        </div>

                        <div class="modal-body">
                            <p><h3 class="text-center">CONFIRMAÇÃO</h3></p>
                            <p class="text-center">Deseja Realizar um Novo Cadastro!</p>
                        </div>

                        <div class="modal-footer ">
                            
                            <a href="../ficha" class="btn btn-primary">Confirmar</a>
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal">Fechar</button>
                            
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" id="atualizar" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#JanelaModalAtualizar">Adicionar Exame</button>
            <div id="JanelaModalAtualizar" class="modal fade " data-bs-backdrop="static">

                <div class="modal-dialog modal-xl modal-dialog-centered ">

                    <div class="modal-content">
 
                        <div class="modal-body">
                        

                            
       
                        </div>
                        <div class="modal-footer ">
                            <button type="reset" class="btn btn-primary ms-5">Limpar dados</button>
                            <button type="button" class="btn btn-primary" >Salvar</button>
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal">Fechar</button>
                        </div>

                    </div>
                </div>
            </div>

            <button onclick="imprimirFichaPesquisa()" class="btn btn-primary ms-2">Imprimir</button>

            <button type="button" id="/atualizar" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#JanelaModalAtualizar">Atualizar Paciente</button>
            <div id="JanelaModalAtualizar" class="modal fade " data-bs-backdrop="static">

                <div class="modal-dialog modal-lg modal-dialog-centered ">

                    <div class="modal-content">
 
                        <div class="modal-header align-self-center">
                            <h2 class="modal-title">Atualização da Ficha do Paciente</h2>
                        </div>

                        <div class="modal-body">
                            <p><h3 class="text-center">PARABÉNS</h3></p>
                            <p class="text-center">Atualização realizado com sucesso!</p>
                            <p class="text-center">Para imprimir a ficha do paciente clique em imprimir.</p>
                        </div>

                        <div class="modal-footer ">
                            <button type="button" class="btn btn-primary" >Imprimir</button>
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" id="/deletar" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#JanelaModalDeletar">Deletar</button>
            <div id="JanelaModalDeletar" name="JanelaModalDeletar" class="modal fade " data-bs-backdrop="static">

                <div class="modal-dialog modal-lg modal-dialog-centered ">

                    <div class="modal-content">
 
                        <div class="modal-header align-self-center">
                            <h2 class="modal-title">Apagar Ficha do Paciente</h2>
                        </div>

                        <div class="modal-body">
                            <p><h3 class="text-center">ATENÇÂO</h3></p>
                            <p class="text-center">Realmente Deseja Apaga o Registro do Paciente!</p>
                        </div>

                        <div class="modal-footer ">
                            <button type="button" onclick="excluirExames()" class="btn btn-primary" data-bs-toggle="modal">OK</button>
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal">Cancelar</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="container-fluid border border-1 border-drak mb-2  bg-white shadow">
           
            <% if (paciente) { %>
               
                <h2 class="mt-3 text-center">Dados do Paciente</h2>
                <div class="row">
                    <span class="mensagem" id="mensagemDeletar" ></span>

                    <div class="my-2 col-1">
                        <label class="form-label">Reg:</label>
                        <input id="pacienteId" class="form-control " type="text" name="id_paciente" value="<%= paciente.id_paciente %>" readonly>
                    </div>

                    <div class="my-2 col-4">
                        <label class="form-label">Nome:</label>
                        <input id="nome" class="form-control" type="text" name="nome" value="<%= paciente.nome %>" readonly>
                    </div>
                    
                    <div class="my-2 col-2">
                        <label class="form-label">CPF:</label>
                        <input id="cpf" class="form-control" type="text" name="cpf" value="<%= paciente.cpf %>" readonly>
                    </div>
                    
                    <div class="my-2 col-2">
                        <label class="form-label">RG:</label>
                        <input id="rg" class="form-control" type="text" name="rg" value="<%= paciente.rg %>" readonly>
                    </div>

                    <div class="my-2 col-2">
                        <label class="form-label">Data de Nascimento:</label>
                        <input id="data_nascimento" class="form-control" type="text" name="data_nasc" value="<%= paciente.data_nascimento %>"  readonly>
                    </div>

                    <div class="my-2 col-1" col>
                        <label for="peso" class="form-label">Sexo:</label>
                        <input id="sexo" class="form-control" type="text" name="sexo" value="<%= paciente.sexo %>" readonly>
                    </div>


                </div>

                <div class="row">
            
                    <div class=" col-4">
                        <label class="form-label">Endereço:</label>
                        <input id="endereco" class="form-control" type="text" name="endereco"  value="<%= paciente.endereco %>" readonly>
                    </div>
    
                    <div class=" col-1">
                        <label class="form-label">Nº:</label>
                        <input id="numero" class="form-control" type="number" name="numero" value="<%= paciente.numero %>" readonly>
                    </div>
    
                    <div class=" col-3">
                        <label class="form-label">Complemento:</label>
                        <input id="complemento" class="form-control" type="text" name="complemento" value="<%= paciente.complemento %>" readonly>
                    </div>

                    <div class=" col-2">
                        <label class="form-label">Bairro:</label>
                        <input id="bairro" class="form-control" type="text" name="bairro" value="<%= paciente.bairro %>" readonly>
                    </div>
    
                    <div class=" col-2">
                        <label class="form-label">Cidade:</label>
                        <input id="cidade" class="form-control" type="text" name="cidade" value="<%= paciente.cidade %>" readonly>
                    </div>
    
                    <div class="my-1 col-1">
                        <label class="form-label">Estado:</label>
                        <input id="estado" class="form-control" type="text" name="estado" value="<%= paciente.estado %>" readonly>
                    </div>

                    <div class="my-1 col-2">
                        <label class="form-label">CEP:</label>
                        <input id="cep" class="form-control" type="text" name="cep" value="<%= paciente.cep %>" readonly>
                    </div>

                    <div class="my-1 col-3">
                        <label class="form-label">Email:</label>
                        <input id="email" class="form-control" type="text" name="email" value="<%= paciente.email %>" readonly>
                    </div>

                    <div class="my-1 col-2">
                        <label class="form-label">Telefone:</label>
                        <input id="telefone" class="form-control" type="text" name="telefone" value="<%= paciente.telefone %>" readonly>
                    </div>
    
                    <div class="my-1 col-2">
                        <label class="form-label">Celular:</label>
                        <input id="celular" class="form-control" type="text" name="celular" value="<%= paciente.celular %>" readonly>
                    </div>

                    <div class="my-1 col-1" col>
                        <label for="peso" class="form-label">Peso:</label>
                        <input id="peso" class="form-control" type="text" name="peso" value="<%= paciente.peso %>" readonly>
                    </div>

                    <div class="my-1 mb-5 col-1">
                        <label class="form-label">Altura:</label>
                        <input id="altura" class="form-control" type="text" name="altura" value="<%= paciente.altura %>" readonly>
                    </div>
                    
                </div>
</div>  
                
               
        
                <% if (exames && exames.length > 0) { %>
                    <h2 class="text-center mt-4">Exames Relacionados</h2>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="pe-5">Nome do Exame</th>
                                <th class="pe-5">Tipo do Entrega</th>
                                <th class="pe-5">Comentários</th>
                                <th class="pe-5">Convênio</th>
                                <th class="pe-5">Data do Exame</th>
                                <th class="pe-5">Data da entrega</th>
                                <th><button onclick="imprimirFichaPesquisa()" class="btn btn-primary ms-2">Novo Exame</button></th>
                                <th></th>
                                <!-- Adicione outros cabeçalhos da tabela de exames conforme necessário -->
                            </tr>
                        </thead>
                        <tbody>
                            <% exames.forEach(function(exame) { %>
                                <tr>
                                    <td><%= exame.nome_exame %></td>
                                    <td><%= exame.tipo_exame %></td>
                                    <td><%= exame.comentario %></td>
                                    <td><%= exame.convenio %></td>
                                    <td><%= exame.data_exame %></td>
                                    <td><%= exame.data_entrega %></td>
                                    <td>
                                        <div class="btn-toolbar">
                                            <div class="btn-group">
                                                
                                                <button class="btn btn-primary">
                                                    <i class="bi bi-printer"></i>
                                                </button>
                                                <button class="btn btn-primary">
                                                    <i class="bi bi-save"></i>
                                                </button>
                                                <button class="btn btn-primary">
                                                    <i class="bi bi-trash"></i>
                                                </button>
                                            </div>
                                        </div>

                                    </td>
                                    
                                    <!-- Adicione outros campos da tabela de exames conforme necessário -->
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                <% } else { %>
                    <p>Nenhum exame encontrado para este paciente.</p>
                <% } %>
            <% } else { %>
                <p>Nenhum paciente encontrado para a pesquisa.</p>
            <% } %>

    </form>
    <div class="pb-4"></div>
</div>
    <div class="print"> 
        <div class="">
    
            <img src="./imagens/medimagem2.png" alt=""> <br>

            <h1>FICHA DO CLIENTE</h1> 
            <div class="data">
                <div class="registroprint"><h6><p>Registro do Paciente: <span id="registroRecebe" ></span></h6></div>
                <div class="data"><h6><p>Data: <span id="dataRecebe" ></span></p></h6></div>
                <div class="idade"><h6><p>Idade: <span id="idadeRecebido" ></span></p></h6></div>
            </div>
        </div>
            <div class="row">
                    <div class="my-3 col-6">
                        <label class="form-label">Nome:</label>
                        <span id="nomeRecebido" class="form-control"></span>
                    </div>

                    <div class="my-3 col-3">
                        <label id="div2" class="form-label">CPF:</label>
                        <span id="cpfRecebido" class="form-control"></span>
                    </div>

                    <div class="my-3 col-3">
                        <label class="form-label">Data de Nascimento:</label>
                        <span id="nascRecebido" class="form-control"></span>
                    </div>

            </div>
    
            <div class="row">

               

                <div class="my-3 col-4">
                    <label class="form-label">Sexo:</label>
                    <span id="sexoRecebido" class="form-control"></span>
                </div>

                <div class="my-3 col-4">
                    <label class="form-label">Celular:</label>
                    <span id="celRecebido" class="form-control"></span>
                </div>
    
                <div class="my-3 col-4">
                    <label class="form-label">Telefone:</label>
                    <span id="telRecebido" class="form-control"></span>
                </div>
    
            </div>
    
            <div class="row">
    
                <div class="my-3 col-6">
                    <label class="form-label">Endereço:</label>
                    <span id="endRecebido" class="form-control"></span>
                    
                </div>
    
                <div class="my-3 col-2">
                    <label class="form-label">Nº:</label>
                    <span id="numRecebido" class="form-control"></span>
                </div>

                <div class="my-3 col">
                    <label class="form-label">Bairro:</label>
                    <span id="bairroRecebido" class="form-control"></span>
                </div>

            </div>

            <div class="row">    

                <div class="my-3 col-4">
                    <label class="form-label">Cidade:</label>
                    <span id="cidadeRecebido" class="form-control"></span>
                </div>

                <div class="my-3 col-4">
                    <label class="form-label">Estado:</label>
                    <span id="estadoRecebido" class="form-control"></span>
                </div>

                <div class="my-3 col-3">
                    <label class="form-label">cep:</label>
                    <span id="cepRecebido" class="form-control"></span>
                </div>
                <div class="my-3 col"></div>
                <div class="my-3 col"></div>
            </div> <br><br>
    
            <h4></h4>
            <h4>Exame</h4>
    
            <div class="row">
    
                <div class="my-3 col-4">
                    <label class="form-label">Nome do Exame:</label>
                    <span id="nomeExameRecebido" class="form-control"></span>
                </div>

                <div class="my-3 col-4">
                    <label class="form-label">Tipo de exame:</label>
                    <span id="tipoExameRecebio" class="form-control"></span>
                </div>
    
                <div class="my-3 col-4">
                    <label class="form-label">Convênio:</label>
                    <span id="convRecebido" class="form-control"></span>
                </div>
    
            </div>   
            
            <div class="row">
    
                <div class="my-3 ">
                    <label class="form-label">Comentários::</label>
                    <span id="recebeComentario" class="form-control"></span>
                </div>
    
            </div> 
            
        </div>
        
    </div>


    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <script>
        $('#cpf').mask('000.000.000-00', {reverse: true});
        $('#rg').mask('00000000-0', {reverse: true});
        $('#data_nascimento')
        $('#celular').mask('(00) 00000-0000');
        $('#telefone').mask('(00) 0000-0000');
        $('#cep').mask('00000-000');
        $('#peso').mask('000 kg', {reverse: true});
        $('#altura').mask('0,00 cm', {reverse: true});
        $('#numero').mask('00.000', {reverse: true});
       
   </script>

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
<script src="./js/print.js"></script>


</html

  


